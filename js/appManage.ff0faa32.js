(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appManage"],{"0996":function(e,t,n){"use strict";n("3e6e")},"3e6e":function(e,t,n){},"534d":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("b0c0"),n("e9c4"),n("7db0");var c=n("7a23"),o=n("5530"),a=n("866a"),i=n("a87f"),r=n("99cb"),l={class:"dialog-footer"},u=Object(c["createTextVNode"])("取 消"),d=Object(c["createTextVNode"])("确 定"),p=Object(c["defineComponent"])({emits:["submit"],setup:function(e,t){var n=t.expose,p=t.emit,s=Object(c["getCurrentInstance"])().appContext.config.globalProperties,b=Object(c["reactive"])({email:""});n({open:O});var f=Object(c["ref"])(!1),m=Object(c["ref"])();function O(e){m.value=e,f.value=!0}function j(){f.value=!1,b.email=""}function g(){var e={appId:m.value,email:b.email},t=s.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(a["d"])(r["AppAssign"],i["c"].AppAssign,e).then((function(t){var n=JSON.parse(t.msg);p("submit",Object(o["a"])(Object(o["a"])({},e),{},{id:n.id})),f.value=!1})).catch((function(e){s.$message.warning({message:"设置失败："+e.msg||!1})})).finally((function(){t.close()}))}return function(e,t){var n=Object(c["resolveComponent"])("el-input"),o=Object(c["resolveComponent"])("el-form-item"),a=Object(c["resolveComponent"])("el-form"),i=Object(c["resolveComponent"])("el-button"),r=Object(c["resolveComponent"])("el-dialog");return Object(c["openBlock"])(),Object(c["createBlock"])(r,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.value=e}),width:"400px",title:"设置App管理员",onClose:j},{footer:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",l,[Object(c["createVNode"])(i,{size:"small",onClick:j},{default:Object(c["withCtx"])((function(){return[u]})),_:1}),Object(c["createVNode"])(i,{size:"small",type:"primary",onClick:g},{default:Object(c["withCtx"])((function(){return[d]})),_:1})])]})),default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{model:Object(c["unref"])(b),size:"small",labelWidth:"60px"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{label:"email："},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,{modelValue:Object(c["unref"])(b).email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(c["unref"])(b).email=e}),autocomplete:"off",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"])}}});const s=p;var b=s,f=n("6c02"),m=n("0613"),O=function(e){return Object(c["pushScopeId"])("data-v-598ab7d4"),e=e(),Object(c["popScopeId"])(),e},j={class:"app_manage"},g={class:"title_wrapper"},v={class:"title"},h=O((function(){return Object(c["createElementVNode"])("span",{class:"title_text"},"App管理",-1)})),C={class:"main_wrapper"},k=Object(c["createTextVNode"])(" 管理 "),N=Object(c["createTextVNode"])(" 取消App管理员 "),V=Object(c["createTextVNode"])(" 设置App管理员 "),x=Object(c["defineComponent"])({setup:function(e){var t=Object(c["getCurrentInstance"])().appContext.config.globalProperties,n=Object(f["d"])(),o=Object(c["computed"])((function(){return m["a"].state.userInfo})),l=Object(c["ref"])([]);function u(){var e=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(a["d"])(r["AppList"],i["c"].AppList).then((function(e){l.value=JSON.parse(e.msg),console.log("appList：",l.value)})).catch((function(e){})).finally((function(){e.close()}))}function d(e){var o=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(a["d"])(r["AppCheckout"],i["c"].AppCheckout,{appId:e.id}).then((function(o){t.$message.success({message:"checkOut App 成功"});var a={appId:e.id,appTitle:e.name};m["a"].commit("setAppInfo",a),window.sessionStorage.setItem("appInfo",JSON.stringify(a)),Object(c["nextTick"])((function(){n.push({name:"appState"})}))})).catch((function(e){t.$message.warning({message:"checkOut App 失败："+e.msg||!1})})).finally((function(){o.close()}))}Object(c["onMounted"])((function(){u()}));var p=Object(c["ref"])();function s(e){p.value.open(e)}function O(e){var t=l.value.find((function(t){return t.id===e.appId}));t&&(t.email=e.email,t.uid=e.id)}function x(e){var n={appId:e.id,del:!0},c=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(a["d"])(r["AppAssign"],i["c"].AppAssign,n).then((function(n){e.uid=void 0,e.email="",t.$message.success({message:"操作成功"})})).catch((function(e){t.$message.warning({message:"取消管理员失败："+e.msg||!1})})).finally((function(){c.close()}))}return function(e,t){var n=Object(c["resolveComponent"])("el-button"),a=Object(c["resolveComponent"])("el-tooltip"),i=Object(c["resolveComponent"])("el-table-column"),r=Object(c["resolveComponent"])("el-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",v,[h,Object(c["createVNode"])(a,{effect:"dark",content:"刷新",placement:"bottom"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(n,{size:"mini",class:"refresh_btn",type:"text",icon:"el-icon-refresh",onClick:t[0]||(t[0]=function(e){return u()}),circle:""})]})),_:1})])]),Object(c["createElementVNode"])("div",C,[Object(c["createVNode"])(r,{data:l.value,border:"",maxHeight:"650px"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(i,{prop:"id",label:"AppID",minWidth:"80"}),Object(c["createVNode"])(i,{prop:"name",label:"AppName",minWidth:"150"}),Object(c["createVNode"])(i,{prop:"uid",label:"管理员id",minWidth:"160"},{default:Object(c["withCtx"])((function(e){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.row.uid?e.row.uid:""),1)]})),_:1}),Object(c["createVNode"])(i,{prop:"email",label:"管理员邮箱",minWidth:"170"}),Object(c["createVNode"])(i,{prop:"total_reg_count",label:"总用户数",minWidth:"80"}),Object(c["createVNode"])(i,{prop:"total_msg_count",label:"总消息数",minWidth:"80"}),Object(c["createVNode"])(i,{label:"操作",minWidth:"220"},{default:Object(c["withCtx"])((function(e){return[Object(c["createVNode"])(n,{type:"primary",size:"mini",onClick:function(t){return d(e.row)}},{default:Object(c["withCtx"])((function(){return[k]})),_:2},1032,["onClick"]),Object(c["unref"])(o).userManage&&e.row.email?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:0,type:"danger",size:"mini",onClick:function(t){return x(e.row)}},{default:Object(c["withCtx"])((function(){return[N]})),_:2},1032,["onClick"])):Object(c["unref"])(o).userManage?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:1,type:"primary",size:"mini",onClick:function(t){return s(e.row.id)}},{default:Object(c["withCtx"])((function(){return[V]})),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["data"])])]),Object(c["createVNode"])(b,{ref_key:"appAdminDialog",ref:p,onSubmit:O},null,512)],64)}}}),w=(n("0996"),n("6b0d")),_=n.n(w);const A=_()(x,[["__scopeId","data-v-598ab7d4"]]);t["default"]=A},"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[c,o]of t)n[c]=o;return n}},e9c4:function(e,t,n){var c=n("23e7"),o=n("da84"),a=n("d066"),i=n("2ba4"),r=n("e330"),l=n("d039"),u=o.Array,d=a("JSON","stringify"),p=r(/./.exec),s=r("".charAt),b=r("".charCodeAt),f=r("".replace),m=r(1..toString),O=/[\uD800-\uDFFF]/g,j=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,v=function(e,t,n){var c=s(n,t-1),o=s(n,t+1);return p(j,e)&&!p(g,o)||p(g,e)&&!p(j,c)?"\\u"+m(b(e,0),16):e},h=l((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&c({target:"JSON",stat:!0,forced:h},{stringify:function(e,t,n){for(var c=0,o=arguments.length,a=u(o);c<o;c++)a[c]=arguments[c];var r=i(d,null,a);return"string"==typeof r?f(r,O,v):r}})}}]);