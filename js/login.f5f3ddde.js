(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"00d8":function(e,t){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,o=0;n<e.length;n++,o+=8)t[o>>>5]|=e[n]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],o=0;o<e.length;o+=3)for(var c=e[o]<<16|e[o+1]<<8|e[o+2],r=0;r<4;r++)8*o+6*r<=8*e.length?n.push(t.charAt(c>>>6*(3-r)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],o=0,c=0;o<e.length;c=++o%4)0!=c&&n.push((t.indexOf(e.charAt(o-1))&Math.pow(2,-2*c+8)-1)<<2*c|t.indexOf(e.charAt(o))>>>6-2*c);return n}};e.exports=n})()},"044b":function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function o(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||o(e)||!!e._isBuffer)}},"0656":function(e,t,n){},"4ffd":function(e,t,n){e.exports=n.p+"img/logo.dc3be0d4.png"},"55e0":function(e,t,n){"use strict";n("0656")},6821:function(e,t,n){(function(){var t=n("00d8"),o=n("9a63").utf8,c=n("044b"),r=n("9a63").bin,a=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?r.stringToBytes(e):o.stringToBytes(e):c(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var i=t.bytesToWords(e),l=8*e.length,s=1732584193,u=-271733879,d=-1732584194,f=271733878,b=0;b<i.length;b++)i[b]=16711935&(i[b]<<8|i[b]>>>24)|4278255360&(i[b]<<24|i[b]>>>8);i[l>>>5]|=128<<l%32,i[14+(l+64>>>9<<4)]=l;var m=a._ff,v=a._gg,g=a._hh,p=a._ii;for(b=0;b<i.length;b+=16){var h=s,O=u,j=d,y=f;s=m(s,u,d,f,i[b+0],7,-680876936),f=m(f,s,u,d,i[b+1],12,-389564586),d=m(d,f,s,u,i[b+2],17,606105819),u=m(u,d,f,s,i[b+3],22,-1044525330),s=m(s,u,d,f,i[b+4],7,-176418897),f=m(f,s,u,d,i[b+5],12,1200080426),d=m(d,f,s,u,i[b+6],17,-1473231341),u=m(u,d,f,s,i[b+7],22,-45705983),s=m(s,u,d,f,i[b+8],7,1770035416),f=m(f,s,u,d,i[b+9],12,-1958414417),d=m(d,f,s,u,i[b+10],17,-42063),u=m(u,d,f,s,i[b+11],22,-1990404162),s=m(s,u,d,f,i[b+12],7,1804603682),f=m(f,s,u,d,i[b+13],12,-40341101),d=m(d,f,s,u,i[b+14],17,-1502002290),u=m(u,d,f,s,i[b+15],22,1236535329),s=v(s,u,d,f,i[b+1],5,-165796510),f=v(f,s,u,d,i[b+6],9,-1069501632),d=v(d,f,s,u,i[b+11],14,643717713),u=v(u,d,f,s,i[b+0],20,-373897302),s=v(s,u,d,f,i[b+5],5,-701558691),f=v(f,s,u,d,i[b+10],9,38016083),d=v(d,f,s,u,i[b+15],14,-660478335),u=v(u,d,f,s,i[b+4],20,-405537848),s=v(s,u,d,f,i[b+9],5,568446438),f=v(f,s,u,d,i[b+14],9,-1019803690),d=v(d,f,s,u,i[b+3],14,-187363961),u=v(u,d,f,s,i[b+8],20,1163531501),s=v(s,u,d,f,i[b+13],5,-1444681467),f=v(f,s,u,d,i[b+2],9,-51403784),d=v(d,f,s,u,i[b+7],14,1735328473),u=v(u,d,f,s,i[b+12],20,-1926607734),s=g(s,u,d,f,i[b+5],4,-378558),f=g(f,s,u,d,i[b+8],11,-2022574463),d=g(d,f,s,u,i[b+11],16,1839030562),u=g(u,d,f,s,i[b+14],23,-35309556),s=g(s,u,d,f,i[b+1],4,-1530992060),f=g(f,s,u,d,i[b+4],11,1272893353),d=g(d,f,s,u,i[b+7],16,-155497632),u=g(u,d,f,s,i[b+10],23,-1094730640),s=g(s,u,d,f,i[b+13],4,681279174),f=g(f,s,u,d,i[b+0],11,-358537222),d=g(d,f,s,u,i[b+3],16,-722521979),u=g(u,d,f,s,i[b+6],23,76029189),s=g(s,u,d,f,i[b+9],4,-640364487),f=g(f,s,u,d,i[b+12],11,-421815835),d=g(d,f,s,u,i[b+15],16,530742520),u=g(u,d,f,s,i[b+2],23,-995338651),s=p(s,u,d,f,i[b+0],6,-198630844),f=p(f,s,u,d,i[b+7],10,1126891415),d=p(d,f,s,u,i[b+14],15,-1416354905),u=p(u,d,f,s,i[b+5],21,-57434055),s=p(s,u,d,f,i[b+12],6,1700485571),f=p(f,s,u,d,i[b+3],10,-1894986606),d=p(d,f,s,u,i[b+10],15,-1051523),u=p(u,d,f,s,i[b+1],21,-2054922799),s=p(s,u,d,f,i[b+8],6,1873313359),f=p(f,s,u,d,i[b+15],10,-30611744),d=p(d,f,s,u,i[b+6],15,-1560198380),u=p(u,d,f,s,i[b+13],21,1309151649),s=p(s,u,d,f,i[b+4],6,-145523070),f=p(f,s,u,d,i[b+11],10,-1120210379),d=p(d,f,s,u,i[b+2],15,718787259),u=p(u,d,f,s,i[b+9],21,-343485551),s=s+h>>>0,u=u+O>>>0,d=d+j>>>0,f=f+y>>>0}return t.endian([s,u,d,f])};a._ff=function(e,t,n,o,c,r,a){var i=e+(t&n|~t&o)+(c>>>0)+a;return(i<<r|i>>>32-r)+t},a._gg=function(e,t,n,o,c,r,a){var i=e+(t&o|n&~o)+(c>>>0)+a;return(i<<r|i>>>32-r)+t},a._hh=function(e,t,n,o,c,r,a){var i=e+(t^n^o)+(c>>>0)+a;return(i<<r|i>>>32-r)+t},a._ii=function(e,t,n,o,c,r,a){var i=e+(n^(t|~o))+(c>>>0)+a;return(i<<r|i>>>32-r)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var o=t.wordsToBytes(a(e,n));return n&&n.asBytes?o:n&&n.asString?r.bytesToString(o):t.bytesToHex(o)}})()},"719e":function(e,t,n){"use strict";n("dcfb")},"9a63":function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},dcfb:function(e,t,n){},dd1d:function(e,t,n){"use strict";n.r(t);n("42dc");var o=n("19ec"),c=n.n(o),r=(n("accc"),n("d197")),a=n.n(r),i=(n("d3b7"),n("7a23")),l=n("4ffd"),s=n.n(l),u=n("5502"),d=n("6c02"),f=n("866a"),b=n("44a6"),m={class:"login_wrapper"},v={class:"login_main"},g=Object(i["createStaticVNode"])('<div class="row_div" style="width:100%;height:10px;" data-v-3cc5f5a6><div class="color_block_1" data-v-3cc5f5a6></div><div class="color_block_2" data-v-3cc5f5a6></div><div class="color_block_3" data-v-3cc5f5a6></div></div><div class="title" data-v-3cc5f5a6>即时通信后台管理</div><img src="'+s.a+'" class="logo" data-v-3cc5f5a6>',3),p={class:"login_body"},h=["src"],O={class:"code_btn"},j={class:"btn_cont"},y=Object(i["createTextVNode"])(" 登录 "),_=Object(i["defineComponent"])({setup:function(e){var t=n("6821"),o=Object(i["getCurrentInstance"])().appContext.config.globalProperties,r=Object(u["b"])(),l=Object(d["d"])(),s=Object(i["reactive"])({email:"",isLogin:!1,vcode:"",codeUrl:"",seed:0,vkey:"",emailCode:"",codeTime:0,ctype:3});function _(e){var t=60*((new Date).getTimezoneOffset()+480)*1e3,n=new Date(e+t),o=new Date(n.getFullYear(),0,1),c=Math.floor((n.valueOf()-o.valueOf())/864e5);return c}function w(e){var t=60*((new Date).getTimezoneOffset()+480)*1e3;return new Date(e+t).getDay()}Object(i["onMounted"])((function(){C(),r.state.curUserId&&(s.email=r.state.curUserId,s.isLogin=!0)}));var k,T=Object(i["ref"])(!1);function C(){T.value=!0,s.vcode="",s.emailCode="";var e=Math.ceil(1e5*Math.random()),n=Date.now(),c=_(n),r=w(n),a=""+e+r+c;o.$http.post("vcode",{sig:t(a),nonce:e}).then((function(e){s.vcode=e.data.code,s.codeUrl="data:image/jpeg;base64,"+e.data.img,s.seed=e.data.seed,s.vkey=e.data.vkey})).finally((function(){T.value=!1}))}function V(){0===s.codeTime&&(k&&(clearInterval(k),k=void 0),s.codeTime=299,k=setInterval((function(){s.codeTime-=1,0===s.codeTime&&(clearInterval(k),k=void 0)}),1e3))}var B=Object(i["ref"])(!1);function x(){s.codeTime>0||(s.email?s.vcode?(B.value=!0,o.$http.post("ecode",{email:s.email,vcode:s.vcode,seed:s.seed,vkey:s.vkey}).then((function(e){Object(b["d"])(o.$message,"邮箱验证码已发送，请登录邮箱查看","success"),s.emailCode=e.data.ecode,V()})).catch((function(e){Object(b["d"])(o.$message,"邮箱验证码发送失败：".concat(e.msg||"")),C()})).finally((function(){B.value=!1}))):Object(b["d"])(o.$message,"请填写图片验证码"):Object(b["d"])(o.$message,"请输入邮箱地址"))}function S(){if(s.isLogin)l.push({name:"home"});else if(s.email)if(s.emailCode){var e=o.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});o.$http.post("login",{email:s.email,ecode:s.emailCode,ctype:s.ctype}).then((function(t){var n={wsUrl:t.data.url,token:t.data.token,email:s.email};U(n,e)})).catch((function(t){e.close(),C(),s.emailCode="",Object(b["d"])(o.$message,"登录失败：".concat(t.msg||""))}))}else Object(b["d"])(o.$message,"请填写邮箱验证码");else Object(b["d"])(o.$message,"请输入邮箱地址")}function U(e,t){var n={token:e.token,wsUrl:e.wsUrl};return Object(f["b"])(n).then((function(n){e.userManage=n.userManage,e.adminManage=n.adminManage,e.isStaff=n.isStaff,r.commit("setUserInfo",e),window.sessionStorage.setItem("email",e.email),window.sessionStorage.setItem("wsUrl",e.wsUrl),window.sessionStorage.setItem("token",e.token),t.close(),l.push({name:"home"})}))}return function(e,t){var n=Object(i["resolveComponent"])("el-input"),o=Object(i["resolveComponent"])("el-button"),r=Object(i["resolveDirective"])("loading");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",m,[Object(i["createElementVNode"])("div",v,[g,Object(i["createElementVNode"])("div",p,[Object(i["createVNode"])(Object(i["unref"])(a.a),{modelValue:Object(i["unref"])(s).ctype,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(i["unref"])(s).ctype=e}),class:"block_select mar_15",placeholder:"请选择客户端"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(Object(i["unref"])(c.a),{label:"管理端",value:1}),Object(i["createVNode"])(Object(i["unref"])(c.a),{label:"Staff端",value:3})]})),_:1},8,["modelValue"]),Object(i["createVNode"])(n,{class:"mar_15",modelValue:Object(i["unref"])(s).email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(i["unref"])(s).email=e}),disabled:Object(i["unref"])(s).isLogin,placeholder:"请输入邮箱地址",clearable:""},null,8,["modelValue","disabled"]),Object(i["createVNode"])(n,{class:"mar_15",modelValue:Object(i["unref"])(s).vcode,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(i["unref"])(s).vcode=e}),placeholder:"图片验证码",clearable:""},{append:Object(i["withCtx"])((function(){return[Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createBlock"])(o,{onClick:C,class:"img_code_btn"},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("img",{class:"img_code",src:Object(i["unref"])(s).codeUrl,alt:""},null,8,h)]})),_:1})),[[r,T.value]])]})),_:1},8,["modelValue"]),Object(i["createVNode"])(n,{modelValue:Object(i["unref"])(s).emailCode,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(i["unref"])(s).emailCode=e}),placeholder:"邮件验证码",clearable:""},{append:Object(i["withCtx"])((function(){return[Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createBlock"])(o,{onClick:x,class:"ecode_btn"},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("span",O,Object(i["toDisplayString"])(Object(i["unref"])(s).codeTime>0?Object(i["unref"])(s).codeTime+"s":"获取验证码"),1)]})),_:1})),[[r,B.value]])]})),_:1},8,["modelValue"]),Object(i["createElementVNode"])("div",j,[Object(i["createVNode"])(o,{type:"primary",class:"login_im_btn",onClick:S},{default:Object(i["withCtx"])((function(){return[y]})),_:1})])])])])}}}),w=(n("55e0"),n("719e"),n("6b0d")),k=n.n(w);const T=k()(_,[["__scopeId","data-v-3cc5f5a6"]]);t["default"]=T}}]);